git add .
timestamp=$(printf "%(%H:%M:%S)T\\n" "-1") 
git commit -m "build: ${timestamp}"
git push
nix_folder="$HOME/nix"
working_dir="$(pwd)"
git_revision="$(git log | head -1 | awk '{print $2;}')"
replace_pattern="      rev = \"${git_revision}\";"
sed -i "6s/.*/${replace_pattern}/" "${nix_folder}/shared/st.nix"
sudo nixos-rebuild switch --flake "/home/fw/nix#laptop"
cd ${working_dir}

